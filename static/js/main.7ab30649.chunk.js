(this["webpackJsonpconnect4-ai"]=this["webpackJsonpconnect4-ai"]||[]).push([[0],{11:function(e,t,a){e.exports=a(19)},18:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),o=a.n(c),i=a(1),l=a(2),s=a(6),u=a(7),m=a(10),f=a(9),v=function(e){var t=e.text;return r.a.createElement("h1",null,t)},d=function(e){var t=e.text;return r.a.createElement("h5",null,t.split("\n").map((function(e,t){return r.a.createElement(r.a.Fragment,{key:"".concat(e,"-").concat(t)},e,r.a.createElement("br",null))})))};d.defaultProps={text:"Default description"};var p=d,h=function(e){var t=e.value,a=e.onClick;return r.a.createElement("button",{className:"btn btn-primary btn-lg",type:"button",onClick:function(e){e.target.blur(),a()}},t)},y=a(8),E=a.n(y),b=function(e){for(var t=e.ROWS,a=e.COLS,n=e.onClick,c=[],o=0;o<t;o++){for(var i=[],l=function(e){var t=r.a.createElement("td",{key:o+"-"+e},r.a.createElement("button",{type:"button",className:"board-button",id:"button-".concat(o,"-").concat(e),onClick:function(){return n(e)}}));i.push(t)},s=0;s<a;s++)l(s);var u=r.a.createElement("tr",{key:o},i);c.push(u)}return r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table"},r.a.createElement("tbody",null,c)))},I=function(e){var t=e.options,a=e.player,n=e.onChange;return r.a.createElement("select",{onChange:n},t.map((function(e){return r.a.createElement("option",{key:"p".concat(a,"-").concat(e)},e)})))},w=function(e){var t=e.min,a=e.max,n=e.step,c=e.defaultValue,o=e.id,i=e.onChange;return r.a.createElement("input",{type:"range",min:t,max:a,step:n,defaultValue:c,id:o,onChange:i})};w.defaultProps={min:0,max:1,step:1,defaultValue:0,id:""};var N=w,k=function(e){var t=e.text,a=e.value;return r.a.createElement("h5",{className:"text-break"},t,": ",a)};k.defaultProps={text:"",value:0};var x=k,g=["Player","Drunk (random)","Easy (2-step minimax)","Normal (4-step minimax)","Hard (neuroevolution)","Extreme (6-step minimax)"],P=function(e){Object(m.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).selectPlayer=function(e,t){1===t?n.setState({p1:e.target.selectedIndex},(function(){return n.runAI()})):2===t&&n.setState({p2:e.target.selectedIndex},(function(){return n.runAI()}))},n.updateAISpeed=function(e){n.setState({aiSpeed:Number(e.target.value)},(function(){return n.runAI()}))},n.setNewGame=function(){n.setState({board:new Array(6).fill(0).map((function(){return new Array(7).fill(0)})),curPlayer:1,winner:-1},(function(){return n.runAI()}));for(var e=0;e<6;e++)for(var t=0;t<7;t++){var a=document.getElementById("button-".concat(e,"-").concat(t));a.classList.contains("p1")&&a.classList.remove("p1"),a.classList.contains("p2")&&a.classList.remove("p2"),a.classList.contains("win")&&a.classList.remove("win")}},n.handlePlayerClick=function(e){(1===n.state.curPlayer&&0===n.state.p1||2===n.state.curPlayer&&0===n.state.p2)&&n.dropDisc(e)},n.dropDisc=function(e){if(-1===n.state.winner){var t=n.getDropRow(n.state.board,e);if(-1!==t){document.getElementById("button-".concat(t,"-").concat(e)).classList.add("p".concat(n.state.curPlayer));var a=n.nextBoard(t,e,n.state.board,n.state.curPlayer),r=-1;n.checkWin(a,t,e)?r=n.state.curPlayer:n.isBoardFull(a)&&(r=0),n.setState({board:a,curPlayer:n.state.curPlayer%2+1,winner:r},(function(){return n.runAI()}))}}},n.checkWin=function(e,t,a){for(var r=!1,c=0;c<4;c++){var o=a-c,i=a+4-c-1,l=t-c,s=t+4-c-1;o>=0&&i<7&&(r=n.checkWinHelper(e,t,o,!1,!0,!1,!1)||r),l>=0&&s<6&&(r=n.checkWinHelper(e,l,a,!0,!1,!1,!1)||r),o>=0&&i<7&&l>=0&&s<6&&(r=n.checkWinHelper(e,l,o,!0,!0,!1,!1)||r);var u=a+c;a-4+c+1>=0&&u<7&&l>=0&&s<6&&(r=n.checkWinHelper(e,l,u,!0,!0,!1,!0)||r)}return r},n.checkWinHelper=function(e,t,a,r,c,o,i){for(var l=0;l<4;l++){var s=a+(c?i?-l:l:0);if(e[t+(r?o?-l:l:0)][s]!==n.state.curPlayer)return!1}for(var u=0;u<4;u++){var m=t+(r?o?-u:u:0),f=a+(c?i?-u:u:0),v=document.getElementById("button-".concat(m,"-").concat(f));v.classList.contains("win")||v.classList.add("win")}return!0},n.runAI=function(){-1===n.state.winner&&(clearTimeout(n.timer),n.timer=setTimeout((function(){1===n.state.curPlayer&&0!==n.state.p1?1===n.state.p1?n.randomAI():2===n.state.p1?n.minimaxAI(2):3===n.state.p1?n.minimaxAI(4):4===n.state.p1||5===n.state.p1&&n.minimaxAI(6):2===n.state.curPlayer&&0!==n.state.p2&&(1===n.state.p2?n.randomAI():2===n.state.p2?n.minimaxAI(2):3===n.state.p2?n.minimaxAI(4):4===n.state.p2||5===n.state.p2&&n.minimaxAI(6))}),100/n.state.aiSpeed))},n.state={board:new Array(6).fill(0).map((function(){return new Array(7).fill(0)})),curPlayer:1,winner:-1,p1:0,p2:0,aiSpeed:.2},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){}},{key:"randomAI",value:function(){var e=this.getValidMoves(this.state.board),t=Object(l.a)(e[Math.floor(Math.random()*e.length)],2),a=(t[0],t[1]);this.dropDisc(a)}},{key:"minimaxAI",value:function(e){var t,a=Number.NEGATIVE_INFINITY,n=[],r=Object(i.a)(this.getValidMoves(this.state.board));try{for(r.s();!(t=r.n()).done;){var c=Object(l.a)(t.value,2),o=c[0],s=c[1],u=this.nextBoard(o,s,this.state.board,this.state.curPlayer),m=this.minimax(u,e-1,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,!1,this.state.curPlayer);m>a?(a=m,n=[s]):m===a&&n.push(s)}}catch(v){r.e(v)}finally{r.f()}var f=n[Math.floor(Math.random()*n.length)];this.dropDisc(f)}},{key:"minimax",value:function(e,t,a,n,r,c){if(0===t||this.isGameOver(e))return this.getHeuristic(e,c);if(r){var o,s=Number.NEGATIVE_INFINITY,u=Object(i.a)(this.getValidMoves(e));try{for(u.s();!(o=u.n()).done;){var m=Object(l.a)(o.value,2),f=m[0],v=m[1],d=this.nextBoard(f,v,e,c),p=this.minimax(d,t-1,a,n,!1,c);if(s=Math.max(s,p),n<=(a=Math.max(a,p)))break}}catch(x){u.e(x)}finally{u.f()}return s}var h,y=Number.POSITIVE_INFINITY,E=Object(i.a)(this.getValidMoves(e));try{for(E.s();!(h=E.n()).done;){var b=Object(l.a)(h.value,2),I=b[0],w=b[1],N=this.nextBoard(I,w,e,c%2+1),k=this.minimax(N,t-1,a,n,!0,c);if(y=Math.min(y,k),(n=Math.min(n,k))<=a)break}}catch(x){E.e(x)}finally{E.f()}return y}},{key:"isGameOver",value:function(e){return this.countWindows(e,1,4)>0||this.countWindows(e,2,4)>0||this.isBoardFull(e)}},{key:"isBoardFull",value:function(e){for(var t=0;t<7;t++)if(0===e[0][t])return!1;return!0}},{key:"getHeuristic",value:function(e,t){for(var a=0,n=0;n<3;n++)a+=Math.pow(10,2*n+1)*this.countWindows(e,t,n+2),a-=Math.pow(10,2*n)*this.countWindows(e,t%2+1,n+2);return a}},{key:"countWindows",value:function(e,t,a){for(var n=0,r=0;r<6;r++)for(var c=0;c<4;c++){for(var o=0,i=0,l=0;l<4;l++){var s=e[r][c+l];s===t?o++:0===s&&i++}o===a&&i===4-o&&n++}for(var u=0;u<3;u++)for(var m=0;m<7;m++){for(var f=0,v=0,d=0;d<4;d++){var p=e[u+d][m];p===t?f++:0===p&&v++}f===a&&v===4-f&&n++}for(var h=0;h<3;h++)for(var y=0;y<4;y++){for(var E=0,b=0,I=0;I<4;I++){var w=e[h+I][y+I];w===t?E++:0===w&&b++}E===a&&b===4-E&&n++}for(var N=0;N<3;N++)for(var k=6;k>2;k--){for(var x=0,g=0,P=0;P<4;P++){var A=e[N+P][k-P];A===t?x++:0===A&&g++}x===a&&g===4-x&&n++}return n}},{key:"getValidMoves",value:function(e){for(var t=[],a=0;a<7;a++)if(0===e[0][a]){var n=this.getDropRow(e,a);t.push([n,a])}return t}},{key:"getDropRow",value:function(e,t){for(var a=5;a>=0;a--)if(0===e[a][t])return a;return-1}},{key:"nextBoard",value:function(e,t,a,n){var r,c=[],o=Object(i.a)(a);try{for(o.s();!(r=o.n()).done;){var l=r.value;c.push(l.slice())}}catch(s){o.e(s)}finally{o.f()}return c[e][t]=n,c}},{key:"render",value:function(){var e,t=this;return e=-1!==this.state.winner?0===this.state.winner?"Draw":"Player ".concat(this.state.winner," wins"):"Player ".concat(this.state.curPlayer," turn"),r.a.createElement("div",{className:"App container-fluid text-center pt-5"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(v,{text:"Connect 4 AI"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(p,{text:"Play versus Player/AI or watch AI play against AI."}))),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col col-auto pt-3"},r.a.createElement("h4",null,"Player 1"),r.a.createElement(I,{options:g,player:1,onChange:function(e){return t.selectPlayer(e,1)}})),r.a.createElement("div",{className:"col col-auto pt-3"},r.a.createElement("h4",null,"Player 2"),r.a.createElement(I,{options:g,player:2,onChange:function(e){return t.selectPlayer(e,2)}}))),r.a.createElement("div",{className:"row justify-content-center pt-3"},r.a.createElement("div",{className:"col col-10 col-sm-8 col-md-6 col-lg-4 col-xl-2"},r.a.createElement(N,{min:.01,max:1,step:.01,defaultValue:this.state.aiSpeed,onChange:this.updateAISpeed}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(x,{text:"AI speed",value:this.state.aiSpeed}))),r.a.createElement("div",{className:"row justify-content-center pt-3"},r.a.createElement("div",{className:"col"},r.a.createElement(h,{value:"New Game",onClick:this.setNewGame}))),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col col-auto pt-5"},r.a.createElement("h4",null,e))),r.a.createElement("div",{className:"row justify-content-center pt-3"},r.a.createElement("div",{className:"col col-auto"},r.a.createElement(b,{ROWS:6,COLS:7,onClick:this.handlePlayerClick}))),r.a.createElement(E.a,{href:"https://github.com/ryantran2165/connect4-ai",bannerColor:"#222",octoColor:"#7fffd4",target:"_blank"}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(17),a(18);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.7ab30649.chunk.js.map